<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="https://lumi.new/lumi.ing/logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO e Acessibilidade -->
  <title>Prefeitura de Aracaju - Serviços Municipais Acessíveis</title>
  <meta name="description" content="Portal oficial da Prefeitura de Aracaju com serviços municipais totalmente acessíveis. Saúde, educação, assistência social e mais, com tecnologia assistiva." />
  <meta name="keywords" content="Aracaju, prefeitura, serviços municipais, acessibilidade, saúde, educação, assistência social" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="Prefeitura de Aracaju - Serviços Acessíveis" />
  <meta property="og:description" content="Portal municipal com total acessibilidade para todos os cidadãos" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="pt_BR" />
  
  <!-- Acessibilidade -->
  <meta name="theme-color" content="#2563eb" />
  <meta name="color-scheme" content="light dark" />
  
  <!-- Preload de fontes importantes para performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  
  <!-- Declaração de idioma para leitores de tela -->
  <meta http-equiv="Content-Language" content="pt-br" />
  
  <!-- Configurações de acessibilidade -->
  <meta name="accessibility-features" content="keyboard-navigation, screen-reader-support, high-contrast, font-scaling" />
  
  <!-- Suporte a diferentes dispositivos -->
  <meta name="format-detection" content="telephone=yes" />
  <meta name="format-detection" content="address=yes" />
  
  <!-- Configurações para PWA (Progressive Web App) -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Prefeitura Aracaju" />
  
  <!-- Prevenção de zoom automático em iOS -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  
  <!-- Skip links CSS inline para carregamento imediato -->
  <style>
    /* Skip links críticos - carregados imediatamente */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: #2563eb;
      color: white;
      padding: 8px 16px;
      text-decoration: none;
      border-radius: 4px;
      font-weight: 600;
      z-index: 9999;
      transition: top 0.3s;
    }
    
    .skip-link:focus {
      top: 6px;
    }
    
    /* Prevenção de flash de conteúdo não estilizado */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }
    
    /* Loading screen acessível */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #f8fafc;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9998;
    }
    
    .loading-content {
      text-align: center;
      color: #1f2937;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e5e7eb;
      border-top: 4px solid #2563eb;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Suporte para usuários que preferem movimento reduzido */
    @media (prefers-reduced-motion: reduce) {
      .loading-spinner {
        animation: none;
        border: 4px solid #2563eb;
      }
    }
    
    /* Alto contraste automático baseado em preferências do sistema */
    @media (prefers-contrast: high) {
      body {
        filter: contrast(150%);
      }
    }
  </style>
</head>
<body>
  <!-- Skip Navigation Links -->
  <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>
  <a href="#main-navigation" class="skip-link">Pular para a navegação</a>
  <a href="#search" class="skip-link">Ir para a busca</a>
  
  <!-- Loading Screen Acessível -->
  <div id="loading-screen" class="loading-screen" role="status" aria-label="Carregando página">
    <div class="loading-content">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p>Carregando serviços municipais...</p>
      <p style="font-size: 0.875rem; color: #6b7280;">
        Portal totalmente acessível da Prefeitura de Aracaju
      </p>
    </div>
  </div>
  
  <!-- React App Container -->
  <div id="root"></div>
  
  <!-- Anúncios para leitores de tela -->
  <div id="announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="urgent-announcements" aria-live="assertive" aria-atomic="true" class="sr-only"></div>
  
  <!-- Script para remover loading screen -->
  <script>
    // Remove loading screen quando a página estiver carregada
    window.addEventListener('load', function() {
      const loadingScreen = document.getElementById('loading-screen');
      if (loadingScreen) {
        loadingScreen.style.opacity = '0';
        setTimeout(() => {
          loadingScreen.remove();
        }, 300);
      }
    });
    
    // Função para anunciar mensagens para leitores de tela
    window.announceToScreenReader = function(message, urgent = false) {
      const container = urgent ? 
        document.getElementById('urgent-announcements') : 
        document.getElementById('announcements');
      
      if (container) {
        container.textContent = message;
        setTimeout(() => {
          container.textContent = '';
        }, 1000);
      }
    };
    
    // Detecta preferências de acessibilidade do usuário
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      document.documentElement.classList.add('reduced-motion');
    }
    
    if (window.matchMedia('(prefers-contrast: high)').matches) {
      document.documentElement.classList.add('high-contrast');
    }
    
    // Suporte a atalhos de teclado globais
    document.addEventListener('keydown', function(e) {
      // Alt + H = Ir para o topo
      if (e.altKey && e.key === 'h') {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
        document.querySelector('h1')?.focus();
      }
      
      // Alt + M = Abrir menu principal
      if (e.altKey && e.key === 'm') {
        e.preventDefault();
        document.getElementById('main-navigation')?.focus();
      }
      
      // Escape = Fechar modais/menus
      if (e.key === 'Escape') {
        const openMenus = document.querySelectorAll('[aria-expanded="true"]');
        openMenus.forEach(menu => {
          menu.click();
        });
      }
    });
    
    // Melhora o foco para usuários de teclado
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Tab') {
        document.body.classList.add('keyboard-navigation');
      }
    });
    
    document.addEventListener('mousedown', function() {
      document.body.classList.remove('keyboard-navigation');
    });
  </script>
  
  <!-- React App Script -->
  <script type="module" src="/src/main.tsx"></script>
</body>
</html>
